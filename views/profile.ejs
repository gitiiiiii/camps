<%- include('partials/header') %>

<!-- Blue Hero Section -->
<div classclass="profile-hero" style="background-color: #0d6efd; color: white; padding: 3rem 1rem; text-align: center;">
  <h1 style="font-size: 2.5rem; font-weight: bold; margin-bottom: 0.5rem;">My Profile</h1>
  <p style="font-size: 1.25rem; opacity: 0.9;">View and manage your transport details</p>
</div>

<!-- White Profile Card Section -->
<div class="container" style="max-width: 960px; margin-top: -3rem; position: relative;">
  <div class="profile-card" style="background: white; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); padding: 2rem;">
    
    <div class="profile-layout" style="display: flex; flex-wrap: wrap; align-items: center; gap: 2rem;">

      <!-- Profile Image -->
      <div class="profile-image" style="flex: 0 0 150px; text-align: center;">
        <img src="<%= currentUser?.profilePic || '/images/default-profile.png' %>"
             alt="Profile Picture"
             style="width: 150px; height: 150px; border-radius: 50%; border: 4px solid #0d6efd; object-fit: cover; margin: auto;" />
      </div>

      <!-- Profile Info -->
      <div class="profile-details" style="flex-grow: 1;">
        <h2 style="font-size: 2.25rem; font-weight: 700; color: #212529; margin-bottom: 1.5rem;"><%= currentUser.name %></h2>
        
        <div class="details-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
          <p><strong>ID:</strong> <%= currentUser.studentId || 'N/A' %></p>
          <p><strong>Course:</strong> <%= currentUser.course || 'N/A' %></p>
          <p><strong>College:</strong> <%= currentUser.college || 'N/A' %></p>
          <p><strong>Year:</strong> <%= currentUser.year || 'N/A' %></p>
          <p><strong>Semester:</strong> <%= currentUser.sem || 'N/A' %></p>
          <p><strong>Email:</strong> <%= currentUser.email %></p>
          <p><strong>Phone:</strong> <%= currentUser.phone || 'N/A' %></p>
          <p><strong>Route Assigned:</strong> 
            <span style="color: #0d6efd; font-weight: 600;"><%= currentUser.route?.name || 'Not Assigned' %></span>
          </p>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="profile-actions" style="display: flex; justify-content: space-between; gap: 1rem; margin-top: 2rem; flex-wrap: wrap;">
      <!-- We can't use a form for Edit Profile, it should be a link -->
      <a href="/profile/edit"
         class="btn-edit" 
         style="background-color: #0d6efd; color: white; padding: 0.75rem 1.5rem; border-radius: 6px; text-decoration: none; font-weight: 500; text-align: center;">
        Edit Profile
      </a>

      <form action="/profile/request-change" method="POST">
        <button type="submit" 
                class="btn-request"
                style="background-color: #ffc107; color: black; padding: 0.75rem 1.5rem; border-radius: 6px; font-weight: 500; border: none; cursor: pointer;">
          Request Route Change
        </button>
      </form>
    </div>

  </div>
</div>

<%- include('partials/footer') %>
